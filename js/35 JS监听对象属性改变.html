<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    let user = {
        name: '11'
    }
    // 方法一
    // Object.defineProperty(user,'name',{
    //     set:function(key,value){
    //         console.log(key,value);
    //     }
    // })

    // Object.defineProperties(obj, {
    //     a: {
    //         configurable: true, // 设置属性可以更改，默认为false
    //         set: function (value) { }
    //     },
    //     b: {
    //         configurable: true, // 设置属性可以更改，默认为false
    //         set: function (value) { }
    //     }
    // } 

    // Object.defineProperty 不足
    // 无法监听数组的变化： 数组的这些方法是无法触发set的:push, pop, shift, unshift,splice, sort, reverse.vue中能监听是因为对这些方法进行了重写
    // 只能监听属性，而不是监听对象本身，需要对对象的每个属性进行遍历。对于原本不在对象中的属性难以监听。

    // 方法二 Proxy:
    // 可以监听数组变化
    // 监听的是对象本身
    // 有13种拦截方法
    var test = new Proxy(user, {
        set: function (target, key, value, receiver) {
            console.log(user)
        }
    })
    test.name = "Sdf"
    test.id = 'dd'

</script>

</html>